<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">lib/validation.js | @otom/validation</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="otom validation module"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="@otom/validation"><meta property="twitter:description" content="otom validation module"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  </ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">lib/validation.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">/**
 * autocomplete valdation &#xBAA8;&#xB4C8;
 *
 * @author caias, kern86
 * @since 2019.09.06 - draft
 * @example
 *  const valdation = require(&apos;@otom/validation&apos;);
 */

&apos;use strict&apos;;

/**
 * &#xC774;&#xBA54;&#xC77C; &#xD0C0;&#xC785;&#xC5D0; &#xB530;&#xB978; &apos;@&#xAE30;&#xC900;&apos; index&#xB97C; &#xBC18;&#xD658;&#xD55C;&#xB2E4;.
 * @type {Object}
 */
const validFns = {
  /**
   * email function
   * @param {string} val value
   * @return {boolean} index &#xC5EC;&#xBD80;
   */
  email: (val) =&gt; {
    return val.indexOf(&apos;@&apos;) &gt; 0;
  },
};

/**
 * &#xBE44;&#xAD50;&#xD560; regexp&#xAC12;&#xC744; &#xBC18;&#xD658;&#xD55C;&#xB2E4;.
 * @type {Object}
 */
const regexFns = {
  /**
   * email function
   * @param {string} val value
   * @return {Object} &#xBE44;&#xAD50;&#xD560; &#xB2E8;&#xC5B4;
   */
  email: (val) =&gt; {
    const charCheck = val.indexOf(&apos;@&apos;) + 1;
    const regex = val.slice(charCheck);
    return new RegExp(`${regex}`);
  },
  /**
   * default function
   * @param {string} val value
   * @return {Object} default text
   */
  default: (val) =&gt; {
    return new RegExp(val);
  },
};

/**
 * type&#xC5D0; &#xB530;&#xB978; validation&#xC744; &#xCCB4;&#xD06C;&#xD55C;&#xB2E4;.
 * @param {string | number} val value
 * @param {string} type autocomplete type
 * @return {boolean} valdation &#xACB0;&#xACFC;
 */
function isValid(val, type) {
  const validFn = validFns[type];

  if (!(typeof validFn === &apos;function&apos;)) { return false; }

  return validFn(val);
}

/**
 * matching &#xB418;&#xB294; Data&#xAC12;&#xB4E4;&#xC744; &#xBC18;&#xD658;&#xD55C;&#xB2E4;.
 * @param {*} val value
 * @param {*} type autocomplete type
 * @param {*} data &#xBE44;&#xAD50;&#xD560; Data
 * @return {Array} matching&#xB41C; Data&#xB97C; &#xBC18;&#xD658;&#xD55C;&#xB2E4;.
 */
function getMatchted(val, type, data) {
  // validation &#xC2E4;&#xD328;&#xC2DC; &#xBE48; array &#xBC18;&#xD658;
  if (!isValid(val, type)) { return []; }

  const regexFn = regexFns[type];
  // regexFn&#xC774; &#xD568;&#xC218;&#xAC00; &#xC544;&#xB2C8;&#xB77C;&#xBA74; &#xBE48; array &#xBC18;&#xD658;
  if (!typeof regexFn === &apos;function&apos;) { return []; }

  const regex = regexFn(val);
  // &#xBE44;&#xAD50;&#xD560; regexp&#xAC00; &#xC5C6;&#xC73C;&#xBA74; &#xBE48; array &#xBC18;&#xD658;
  if (!regex) { return []; }

  return data.filter(v =&gt; regex.test(v));
}

module.exports = {
  getMatchted,
};
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
